<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PROPLEDGER - Blockchain Real Estate Investment Platform</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚õìÔ∏è</text></svg>">
</head>
<body>
    <!-- Gloomy Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-content">
            <div class="loading-logo">
                <span class="chain-icon">‚õìÔ∏è</span>
                <span class="logo-text">PROPLEDGER</span>
            </div>
            <div class="loading-spinner">
                <div class="spinner-ring"></div>
                <div class="spinner-ring"></div>
                <div class="spinner-ring"></div>
            </div>
            <div class="loading-text">
                <span class="loading-message">Initializing Blockchain Network...</span>
                <div class="loading-dots">
                    <span>.</span><span>.</span><span>.</span>
                </div>
            </div>
        </div>
        <div class="loading-bg-effects">
            <div class="floating-particle"></div>
            <div class="floating-particle"></div>
            <div class="floating-particle"></div>
            <div class="floating-particle"></div>
            <div class="floating-particle"></div>
        </div>
    </div>
    
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo-section">
                <a href="index.html" class="logo">PROPLEDGER</a>
                <div class="token-info-bar" id="tokenBar" style="display: none;">
                    <span class="token-count" id="tokenCount">0 Tokens</span>
                    <span class="token-separator">|</span>
                    <span class="token-value" id="tokenValue">‚Ç® 0</span>
                </div>
            </div>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="investments.html">Investments</a></li>
                <li><a href="properties.html">Properties</a></li>
                <li><a href="crowdfunding.html">Crowdfunding</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="support.html">Support</a></li>
            </ul>
            
            <div class="auth-buttons">
                <button onclick="openTokenPurchaseModal()" class="btn btn-success">üí≥ Buy Tokens</button>
                <a href="login.html" class="btn btn-secondary">Login</a>
                <a href="signup.html" class="btn btn-primary">Sign Up</a>
            </div>
        </div>
    </nav>

    <div class="page-container" id="mainContent" style="opacity: 0;">


    <!-- Hero Section -->
    <section id="home" class="hero">
        <h1>PROPLEDGER</h1>
        <p class="hero-subtitle">Pakistan's First CDA-Compliant Blockchain Real Estate Investment Platform</p>
        <p>Revolutionizing property investment with blockchain technology, smart contracts, and full CDA compliance. Invest in tokenized properties, earn transparent ROI, and participate in Pakistan's digital real estate future.</p>
        
        <div class="hero-stats" style="display: flex; justify-content: center; gap: 2rem; margin: 2rem 0; flex-wrap: wrap;">
            <div class="stat-item" style="text-align: center; padding: 1rem; background: rgba(0, 212, 255, 0.1); border-radius: 10px; min-width: 150px;">
                <div style="font-size: 2rem; color: var(--blockchain-blue); font-weight: bold;">‚Ç®2.5B+</div>
                <div style="color: var(--text-secondary); font-size: 0.9rem;">Property Value</div>
            </div>
            <div class="stat-item" style="text-align: center; padding: 1rem; background: rgba(0, 212, 255, 0.1); border-radius: 10px; min-width: 150px;">
                <div style="font-size: 2rem; color: var(--blockchain-blue); font-weight: bold;">1,200+</div>
                <div style="color: var(--text-secondary); font-size: 0.9rem;">CDA Approved Properties</div>
            </div>
            <div class="stat-item" style="text-align: center; padding: 1rem; background: rgba(0, 212, 255, 0.1); border-radius: 10px; min-width: 150px;">
                <div style="font-size: 2rem; color: var(--blockchain-blue); font-weight: bold;">15,000+</div>
                <div style="color: var(--text-secondary); font-size: 0.9rem;">Active Investors</div>
            </div>
            <div class="stat-item" style="text-align: center; padding: 1rem; background: rgba(0, 212, 255, 0.1); border-radius: 10px; min-width: 150px;">
                <div style="font-size: 2rem; color: var(--blockchain-blue); font-weight: bold;">12.5%</div>
                <div style="color: var(--text-secondary); font-size: 0.9rem;">Average ROI</div>
            </div>
        </div>
        
        <div class="hero-badges" style="display: flex; justify-content: center; gap: 1rem; margin: 2rem 0; flex-wrap: wrap;">
            <div class="blockchain-badge" style="background: #10B981; padding: 0.8rem 1.5rem;">
                <span>üè¢</span>
                CDA Certified Platform
            </div>
            <div class="blockchain-badge" style="background: #6366F1; padding: 0.8rem 1.5rem;">
                <span>üîó</span>
                Blockchain Secured
            </div>
            <div class="blockchain-badge" style="background: #F59E0B; padding: 0.8rem 1.5rem;">
                <span>üõ°Ô∏è</span>
                Smart Contract Protected
            </div>
        </div>
        
        <div class="hero-actions" style="display: flex; justify-content: center; gap: 1rem; margin-top: 2rem; flex-wrap: wrap;">
            <a href="dashboard.html" class="btn btn-success" style="font-size: 1.1rem; padding: 1rem 2rem;">üìä My Dashboard</a>
            <a href="properties.html" class="btn btn-primary" style="font-size: 1.1rem; padding: 1rem 2rem;">üè† Browse CDA Properties</a>
            <a href="investments.html" class="btn btn-secondary" style="font-size: 1.1rem; padding: 1rem 2rem;">üí∞ Start Investing</a>
        </div>
    </section>

    <!-- Modules Section -->
    <section id="modules" class="modules-section">
        <h2 class="section-title">Platform Features</h2>
        
        <!-- Core Investment Features -->
        <div class="feature-category">
            <h3 class="category-title">Investment & Trading</h3>
            <div class="modules-grid core-features">
            <!-- Investments Module -->
            <div class="module-card" id="investments" onclick="window.location.href='investments.html'" style="cursor: pointer;">
                <span class="module-icon">üí∞</span>
                <h3>Investments</h3>
                <p>Invest in real estate properties using blockchain-based tokens. Purchase tokens via fiat or cryptocurrency and earn calculated ROI on your investments.</p>
                <ul class="features-list">
                    <li>Investment Listings</li>
                    <li>Buy Property Shares</li>
                    <li>ROI Calculator</li>
                    <li>Token-based Transactions</li>
                </ul>
                <div style="margin-top: 1rem;">
                    <span class="btn btn-primary" style="display: inline-block; padding: 0.5rem 1rem; font-size: 0.9rem;">Start Investing ‚Üí</span>
                </div>
            </div>

            <!-- Property Management Module -->
            <div class="module-card" id="properties" onclick="window.location.href='properties.html'" style="cursor: pointer;">
                <span class="module-icon">üè†</span>
                <h3>Property Management</h3>
                <p>Comprehensive property management system supporting residential and commercial listings with tokenized transactions on the blockchain.</p>
                <ul class="features-list">
                    <li>Residential and Commercial Properties</li>
                    <li>Add Properties</li>
                    <li>Filtered Browsing</li>
                    <li>Sell Properties</li>
                </ul>
                <div style="margin-top: 1rem;">
                    <span class="btn btn-primary" style="display: inline-block; padding: 0.5rem 1rem; font-size: 0.9rem;">Browse Properties ‚Üí</span>
                </div>
            </div>

            <!-- Crowdfunding Module -->
            <div class="module-card" onclick="window.location.href='crowdfunding.html'" style="cursor: pointer;">
                <span class="module-icon">ü§ù</span>
                <h3>Crowdfunding</h3>
                <p>Participate in collaborative property investments through blockchain-powered crowdfunding campaigns with transparent smart contracts.</p>
                <ul class="features-list">
                    <li>Campaign Creation</li>
                    <li>Collaborative Funding</li>
                    <li>Smart Contract Automation</li>
                    <li>Progress Tracking</li>
                </ul>
                <div style="margin-top: 1rem;">
                    <span class="btn btn-primary" style="display: inline-block; padding: 0.5rem 1rem; font-size: 0.9rem;">View Campaigns ‚Üí</span>
                </div>
            </div>
            </div>
        </div>

        <!-- Professional Services -->
        <div class="feature-category">
            <h3 class="category-title">Professional Services</h3>
            <div class="modules-grid professional-services">
            
            <!-- Portfolio Management Module -->
            <div class="module-card" id="portfolio-management">
                <span class="module-icon">üë•</span>
                <h3>Portfolio Management</h3>
                <p>Connect with professional portfolio managers who specialize in real estate investments and blockchain assets. Schedule video calls, send messages, and arrange online meetings.</p>
                <ul class="features-list">
                    <li>Expert Portfolio Managers</li>
                    <li>Video Call & Messaging</li>
                    <li>Online Meeting Scheduling</li>
                    <li>Personalized Investment Strategies</li>
                </ul>
                <div style="margin-top: 1rem;">
                    <a href="managers.html" class="btn btn-primary" id="viewManagersBtn" style="display: inline-block; padding: 0.5rem 1rem; font-size: 0.9rem; cursor: pointer; text-decoration: none;">View Managers ‚Üí</a>
                </div>
            </div>

            <!-- Online Meetings Module -->
            <div class="module-card" id="meetings">
                <span class="module-icon">üìπ</span>
                <h3>Online Meetings & Video Communication</h3>
                <p>Enable real-time communication between buyers, sellers, and agents through integrated video calls and meetings within the platform.</p>
                <ul class="features-list">
                    <li>Live Video Meetings</li>
                    <li>Virtual Property Tours</li>
                    <li>Document Sharing & Screen Sharing</li>
                    <li>Chat & Notes Panel</li>
                    <li>Encrypted Communication</li>
                </ul>
            </div>

            <!-- Analytics Dashboard -->
            <div class="module-card" onclick="redirectToDashboard()" style="cursor: pointer;">
                <span class="module-icon">üìä</span>
                <h3>Analytics Dashboard</h3>
                <p>Comprehensive analytics and reporting tools to track your investments, property performance, and market trends in real-time.</p>
                <ul class="features-list">
                    <li>Investment Portfolio Tracking</li>
                    <li>Market Analysis</li>
                    <li>Performance Metrics</li>
                    <li>ROI Visualization</li>
                </ul>
                <div style="margin-top: 1rem;">
                    <span class="btn btn-primary" style="display: inline-block; padding: 0.5rem 1rem; font-size: 0.9rem;">View Dashboard ‚Üí</span>
                </div>
            </div>
            </div>
        </div>

        <!-- Technology & Security -->
        <div class="feature-category">
            <h3 class="category-title">Technology & Security</h3>
            <div class="modules-grid tech-features">
            
            <!-- Blockchain Features -->
            <div class="module-card">
                <span class="module-icon">‚õìÔ∏è</span>
                <h3>Blockchain Security</h3>
                <p>Built on secure blockchain technology ensuring transparent, immutable, and decentralized property transactions and investments.</p>
                <ul class="features-list">
                    <li>Smart Contract Integration</li>
                    <li>Immutable Transaction Records</li>
                    <li>Decentralized Architecture</li>
                    <li>Cryptocurrency Support</li>
                </ul>
            </div>

            <!-- CDA Compliance Section -->
            <div class="info-card">
                <span class="info-icon">üèõÔ∏è</span>
                <h3>CDA Compliance</h3>
                <p>All properties listed on PROPLEDGER are reviewed for Capital Development Authority (CDA) compliance, ensuring that you invest in legally approved real estate projects. Our top priority is to offer a secure and government-authorized investment platform. Check our CDA certificate and approval numbers for complete transparency and trust.</p>
            </div>

            <!-- Blockchain Technology Section -->
            <div class="info-card">
                <span class="info-icon">üîí</span>
                <h3>Blockchain Technology</h3>
                <p>Embrace the future of real estate with blockchain technology, guaranteeing transparent, immutable, and efficient transactions. Enjoy benefits such as decentralized architecture, immutable records, and smart contracts that automate and secure every aspect of your investment.</p>
            </div>

            <!-- Real Estate Investment -->
            <div class="info-card">
                <span class="info-icon">üèòÔ∏è</span>
                <h3>Real Estate Investment</h3>
                <p>Dive into the thriving world of tokenized real estate. Whether you're investing in luxury villas, urban apartments, or commercial plots, PROPLEDGER brings you a diversified portfolio with competitive ROI, enhanced by real-time analytics.</p>
            </div>

            <!-- Security and Reliability -->
            <div class="info-card">
                <span class="info-icon">üõ°Ô∏è</span>
                <h3>Security and Reliability</h3>
                <p>Security is at the heart of PROPLEDGER. Our platform employs state-of-the-art security measures to protect your investments and personal information. With encrypted transactions and multi-layered protection, you can confidently engage in seamless real estate deals.</p>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <p>&copy; 2024 PROPLEDGER. All rights reserved.</p>
            <div class="blockchain-badge">
                <span>üîê</span>
                Secured by Blockchain Technology
            </div>
        </div>
    </footer>

    <!-- Portfolio Managers Modal -->
    <div id="portfolioManagersModal" class="modal" style="display: none; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 10000; background-color: rgba(0, 0, 0, 0.8); justify-content: center; align-items: center;">
        <div class="modal-content" style="max-width: 1200px; width: 90%; max-height: 90vh; overflow-y: auto; background: white; border-radius: 20px; position: relative;">
            <div class="modal-header">
                <h2>Portfolio Managers</h2>
                <span class="close" onclick="closePortfolioManagers()">&times;</span>
            </div>
            <div class="modal-body">
                <p style="text-align: center; margin-bottom: 2rem; color: var(--text-secondary);">
                    Connect with our expert portfolio managers for personalized investment strategies and professional guidance.
                </p>
                
                <div class="agents-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 2rem;">
                    
                    <!-- Agent 1 -->
                    <div class="agent-card" style="background: var(--card-bg); border-radius: 15px; padding: 2rem; border: 1px solid var(--border-color); transition: transform 0.3s ease;">
                        <div class="agent-header" style="text-align: center; margin-bottom: 1.5rem;">
                            <div class="agent-avatar" style="width: 80px; height: 80px; border-radius: 50%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); margin: 0 auto 1rem; display: flex; align-items: center; justify-content: center; font-size: 2rem; color: white;">AH</div>
                            <h3 style="margin: 0; color: var(--text-primary);">Ahmed Hassan</h3>
                            <p style="color: var(--blockchain-blue); font-weight: 600; margin: 0.5rem 0;">Senior Portfolio Manager</p>
                            <div class="rating" style="color: #fbbf24;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ (4.9/5)</div>
                        </div>
                        
                        <div class="agent-info" style="margin-bottom: 1.5rem;">
                            <p style="font-size: 0.9rem; color: var(--text-secondary); line-height: 1.5;">
                                Specializes in residential and commercial real estate investments with 8+ years of experience in blockchain-based property management.
                            </p>
                            <div class="agent-stats" style="display: flex; justify-content: space-between; margin-top: 1rem; font-size: 0.8rem;">
                                <span><strong>Experience:</strong> 8 years</span>
                                <span><strong>Clients:</strong> 150+</span>
                                <span><strong>ROI Avg:</strong> 14.2%</span>
                            </div>
                        </div>
                        
                        <div class="agent-actions" style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                            <button class="btn btn-primary" onclick="startVideoCall('Ahmed Hassan')" style="flex: 1; padding: 0.7rem; font-size: 0.9rem;">üìπ Video Call</button>
                            <button class="btn btn-secondary" onclick="sendMessage('Ahmed Hassan')" style="flex: 1; padding: 0.7rem; font-size: 0.9rem;">üí¨ Message</button>
                            <button class="btn btn-success" onclick="scheduleMeeting('Ahmed Hassan')" style="width: 100%; padding: 0.7rem; font-size: 0.9rem; margin-top: 0.5rem;">üìÖ Schedule Meeting</button>
                        </div>
                    </div>

                    <!-- Agent 2 -->
                    <div class="agent-card" style="background: var(--card-bg); border-radius: 15px; padding: 2rem; border: 1px solid var(--border-color); transition: transform 0.3s ease;">
                        <div class="agent-header" style="text-align: center; margin-bottom: 1.5rem;">
                            <div class="agent-avatar" style="width: 80px; height: 80px; border-radius: 50%; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); margin: 0 auto 1rem; display: flex; align-items: center; justify-content: center; font-size: 2rem; color: white;">SA</div>
                            <h3 style="margin: 0; color: var(--text-primary);">Sarah Ali</h3>
                            <p style="color: var(--blockchain-blue); font-weight: 600; margin: 0.5rem 0;">Investment Strategist</p>
                            <div class="rating" style="color: #fbbf24;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ (4.8/5)</div>
                        </div>
                        
                        <div class="agent-info" style="margin-bottom: 1.5rem;">
                            <p style="font-size: 0.9rem; color: var(--text-secondary); line-height: 1.5;">
                                Expert in cryptocurrency and tokenized real estate investments. Focuses on high-growth potential properties and risk management strategies.
                            </p>
                            <div class="agent-stats" style="display: flex; justify-content: space-between; margin-top: 1rem; font-size: 0.8rem;">
                                <span><strong>Experience:</strong> 6 years</span>
                                <span><strong>Clients:</strong> 120+</span>
                                <span><strong>ROI Avg:</strong> 16.8%</span>
                            </div>
                        </div>
                        
                        <div class="agent-actions" style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                            <button class="btn btn-primary" onclick="startVideoCall('Sarah Ali')" style="flex: 1; padding: 0.7rem; font-size: 0.9rem;">üìπ Video Call</button>
                            <button class="btn btn-secondary" onclick="sendMessage('Sarah Ali')" style="flex: 1; padding: 0.7rem; font-size: 0.9rem;">üí¨ Message</button>
                            <button class="btn btn-success" onclick="scheduleMeeting('Sarah Ali')" style="width: 100%; padding: 0.7rem; font-size: 0.9rem; margin-top: 0.5rem;">üìÖ Schedule Meeting</button>
                        </div>
                    </div>

                    <!-- Agent 3 -->
                    <div class="agent-card" style="background: var(--card-bg); border-radius: 15px; padding: 2rem; border: 1px solid var(--border-color); transition: transform 0.3s ease;">
                        <div class="agent-header" style="text-align: center; margin-bottom: 1.5rem;">
                            <div class="agent-avatar" style="width: 80px; height: 80px; border-radius: 50%; background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); margin: 0 auto 1rem; display: flex; align-items: center; justify-content: center; font-size: 2rem; color: white;">MK</div>
                            <h3 style="margin: 0; color: var(--text-primary);">Muhammad Khan</h3>
                            <p style="color: var(--blockchain-blue); font-weight: 600; margin: 0.5rem 0;">Blockchain Specialist</p>
                            <div class="rating" style="color: #fbbf24;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ (4.7/5)</div>
                        </div>
                        
                        <div class="agent-info" style="margin-bottom: 1.5rem;">
                            <p style="font-size: 0.9rem; color: var(--text-secondary); line-height: 1.5;">
                                Blockchain technology expert specializing in smart contracts and DeFi real estate solutions. Helps clients navigate complex tokenized investments.
                            </p>
                            <div class="agent-stats" style="display: flex; justify-content: space-between; margin-top: 1rem; font-size: 0.8rem;">
                                <span><strong>Experience:</strong> 5 years</span>
                                <span><strong>Clients:</strong> 95+</span>
                                <span><strong>ROI Avg:</strong> 13.5%</span>
                            </div>
                        </div>
                        
                        <div class="agent-actions" style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                            <button class="btn btn-primary" onclick="startVideoCall('Muhammad Khan')" style="flex: 1; padding: 0.7rem; font-size: 0.9rem;">üìπ Video Call</button>
                            <button class="btn btn-secondary" onclick="sendMessage('Muhammad Khan')" style="flex: 1; padding: 0.7rem; font-size: 0.9rem;">üí¨ Message</button>
                            <button class="btn btn-success" onclick="scheduleMeeting('Muhammad Khan')" style="width: 100%; padding: 0.7rem; font-size: 0.9rem; margin-top: 0.5rem;">üìÖ Schedule Meeting</button>
                        </div>
                    </div>

                    <!-- Agent 4 -->
                    <div class="agent-card" style="background: var(--card-bg); border-radius: 15px; padding: 2rem; border: 1px solid var(--border-color); transition: transform 0.3s ease;">
                        <div class="agent-header" style="text-align: center; margin-bottom: 1.5rem;">
                            <div class="agent-avatar" style="width: 80px; height: 80px; border-radius: 50%; background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); margin: 0 auto 1rem; display: flex; align-items: center; justify-content: center; font-size: 2rem; color: white;">FN</div>
                            <h3 style="margin: 0; color: var(--text-primary);">Fatima Noor</h3>
                            <p style="color: var(--blockchain-blue); font-weight: 600; margin: 0.5rem 0;">Commercial Property Expert</p>
                            <div class="rating" style="color: #fbbf24;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ (4.9/5)</div>
                        </div>
                        
                        <div class="agent-info" style="margin-bottom: 1.5rem;">
                            <p style="font-size: 0.9rem; color: var(--text-secondary); line-height: 1.5;">
                                Specializes in commercial real estate investments including office buildings, retail spaces, and industrial properties with exceptional market insights.
                            </p>
                            <div class="agent-stats" style="display: flex; justify-content: space-between; margin-top: 1rem; font-size: 0.8rem;">
                                <span><strong>Experience:</strong> 10 years</span>
                                <span><strong>Clients:</strong> 200+</span>
                                <span><strong>ROI Avg:</strong> 15.3%</span>
                            </div>
                        </div>
                        
                        <div class="agent-actions" style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                            <button class="btn btn-primary" onclick="startVideoCall('Fatima Noor')" style="flex: 1; padding: 0.7rem; font-size: 0.9rem;">üìπ Video Call</button>
                            <button class="btn btn-secondary" onclick="sendMessage('Fatima Noor')" style="flex: 1; padding: 0.7rem; font-size: 0.9rem;">üí¨ Message</button>
                            <button class="btn btn-success" onclick="scheduleMeeting('Fatima Noor')" style="width: 100%; padding: 0.7rem; font-size: 0.9rem; margin-top: 0.5rem;">üìÖ Schedule Meeting</button>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <script src="js/main.js"></script>
    <script src="js/payment.js"></script>
    <script src="js/auth.js"></script>
    <script>
        // Loading screen functionality
        window.addEventListener('load', function() {
            setTimeout(function() {
                document.getElementById('loadingScreen').classList.add('fade-out');
                document.getElementById('mainContent').style.opacity = '1';
            }, 2000);
        });
        
        // Redirect to appropriate dashboard based on user type
        function redirectToDashboard() {
            const user = localStorage.getItem('propledger_user');
            if (user) {
                const userData = JSON.parse(user);
                const userType = userData.type || userData.user_type;
                if (userType === 'agent') {
                    window.location.href = 'agent-dashboard.html';
                } else {
                    window.location.href = 'dashboard.html';
                }
            } else {
                // Not logged in, redirect to login
                window.location.href = 'login.html';
            }
        }

        // Initialize crypto address on page load if modal is opened
        document.addEventListener('DOMContentLoaded', function() {
            // Load token balance from localStorage
            const savedBalance = localStorage.getItem('propledger_token_balance');
            if (savedBalance) {
                updateTokenDisplays(parseInt(savedBalance));
            }
            
            // Show/hide token bar based on authentication
            const user = localStorage.getItem('propledger_user');
            const tokenBar = document.getElementById('tokenBar');
            if (user && tokenBar) {
                const userData = JSON.parse(user);
                const userType = userData.type || userData.user_type;
                
                // Only show token bar for investors, not agents
                if (userType !== 'agent') {
                    tokenBar.style.display = 'flex';
                    // Update token display with saved balance or default to 0
                    const balance = savedBalance ? parseInt(savedBalance) : 0;
                    document.getElementById('tokenCount').textContent = balance + ' Tokens';
                    document.getElementById('tokenValue').textContent = '‚Ç® ' + (balance * 1000).toLocaleString();
                }
            }
        });
    </script>
</body>
</html>
