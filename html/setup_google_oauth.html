<!DOCTYPE html>
<html>
<head>
    <title>Google OAuth Setup - PROPLEDGER</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #1a1a1a; color: white; }
        .setup-section { margin: 20px 0; padding: 20px; border: 1px solid #333; border-radius: 8px; background: #2a2a2a; }
        .step { margin: 15px 0; padding: 15px; background: #333; border-radius: 5px; }
        .step h3 { color: #00d4ff; margin-top: 0; }
        .code-box { background: #1a1a1a; padding: 15px; border-radius: 5px; font-family: monospace; margin: 10px 0; }
        .success { color: #4CAF50; }
        .warning { color: #ff9800; }
        .error { color: #f44336; }
        input[type="text"] { width: 100%; padding: 10px; margin: 5px 0; background: #1a1a1a; color: white; border: 1px solid #555; border-radius: 5px; }
        button { padding: 10px 20px; margin: 5px; border: none; border-radius: 5px; cursor: pointer; background: #00d4ff; color: white; }
        .btn-copy { background: #4CAF50; }
        a { color: #00d4ff; }
    </style>
</head>
<body>
    <h1>ðŸ”§ Google OAuth Setup for PROPLEDGER</h1>
    
    <div class="setup-section">
        <h2>ðŸ“‹ Step-by-Step Instructions</h2>
        
        <div class="step">
            <h3>Step 1: Google Cloud Console</h3>
            <p>1. Go to: <a href="https://console.developers.google.com/" target="_blank">Google Cloud Console</a></p>
            <p>2. Sign in with your Google account</p>
            <p>3. Create new project: <strong>"PROPLEDGER-OAuth"</strong></p>
        </div>
        
        <div class="step">
            <h3>Step 2: Enable Google+ API</h3>
            <p>1. Go to <strong>APIs & Services</strong> â†’ <strong>Library</strong></p>
            <p>2. Search for: <strong>"Google+ API"</strong></p>
            <p>3. Click <strong>ENABLE</strong></p>
        </div>
        
        <div class="step">
            <h3>Step 3: Create OAuth Credentials</h3>
            <p>1. Go to <strong>APIs & Services</strong> â†’ <strong>Credentials</strong></p>
            <p>2. Click <strong>+ CREATE CREDENTIALS</strong> â†’ <strong>OAuth 2.0 Client IDs</strong></p>
            <p>3. Application type: <strong>Web application</strong></p>
            <p>4. Name: <strong>PROPLEDGER Web Client</strong></p>
        </div>
        
        <div class="step">
            <h3>Step 4: Add Redirect URI</h3>
            <p>Copy this exact URI and paste it in Google Console:</p>
            <div class="code-box">
                <code id="redirectUri">http://localhost/PROPLEDGER/auth/oauth_callback_simple.php?provider=google</code>
                <button class="btn-copy" onclick="copyToClipboard('redirectUri')">Copy URI</button>
            </div>
        </div>
        
        <div class="step">
            <h3>Step 5: Get Your Credentials</h3>
            <p>After creating, Google will show you:</p>
            <p><strong>Client ID:</strong> (ends with .apps.googleusercontent.com)</p>
            <input type="text" id="clientId" placeholder="Paste your Google Client ID here">
            
            <p><strong>Client Secret:</strong> (random string)</p>
            <input type="text" id="clientSecret" placeholder="Paste your Google Client Secret here">
            
            <button onclick="updateCredentials()">Update PROPLEDGER Files</button>
        </div>
    </div>
    
    <div class="setup-section">
        <h2>ðŸ”§ File Updates Required</h2>
        <div id="fileUpdates" style="display: none;">
            <div class="step">
                <h3>Update oauth_login_simple.php</h3>
                <p>Replace line 37 with:</p>
                <div class="code-box">
                    <code id="loginUpdate">'client_id' => 'YOUR_CLIENT_ID_HERE',</code>
                    <button class="btn-copy" onclick="copyToClipboard('loginUpdate')">Copy</button>
                </div>
            </div>
            
            <div class="step">
                <h3>Update oauth_callback_simple.php</h3>
                <p>Replace lines 38-39 with:</p>
                <div class="code-box">
                    <code id="callbackUpdate">'client_id' => 'YOUR_CLIENT_ID_HERE',<br>'client_secret' => 'YOUR_CLIENT_SECRET_HERE',</code>
                    <button class="btn-copy" onclick="copyToClipboard('callbackUpdate')">Copy</button>
                </div>
            </div>
        </div>
    </div>
    
    <div class="setup-section">
        <h2>ðŸ§ª Test Your Setup</h2>
        <p>After updating the credentials:</p>
        <ol>
            <li>Go to: <a href="login.html" target="_blank">PROPLEDGER Login Page</a></li>
            <li>Click <strong>"Continue with Google"</strong></li>
            <li>Should redirect to Google login</li>
            <li>After login, redirects back to PROPLEDGER</li>
            <li>User automatically created/logged in</li>
        </ol>
        
        <div class="step">
            <h3>Expected Flow:</h3>
            <p class="success">âœ… Click Google button â†’ Google login page</p>
            <p class="success">âœ… Login with Google â†’ Redirect back to PROPLEDGER</p>
            <p class="success">âœ… User created in database â†’ Logged into PROPLEDGER</p>
        </div>
    </div>
    
    <script>
        function copyToClipboard(elementId) {
            const element = document.getElementById(elementId);
            const text = element.textContent || element.innerText;
            navigator.clipboard.writeText(text).then(() => {
                alert('Copied to clipboard!');
            });
        }
        
        function updateCredentials() {
            const clientId = document.getElementById('clientId').value;
            const clientSecret = document.getElementById('clientSecret').value;
            
            if (!clientId || !clientSecret) {
                alert('Please enter both Client ID and Client Secret');
                return;
            }
            
            // Update the code examples
            document.getElementById('loginUpdate').textContent = `'client_id' => '${clientId}',`;
            document.getElementById('callbackUpdate').innerHTML = `'client_id' => '${clientId}',<br>'client_secret' => '${clientSecret}',`;
            
            // Show the file updates section
            document.getElementById('fileUpdates').style.display = 'block';
            
            alert('âœ… Code examples updated! Copy and paste them into your PHP files.');
        }
    </script>
</body>
</html>
